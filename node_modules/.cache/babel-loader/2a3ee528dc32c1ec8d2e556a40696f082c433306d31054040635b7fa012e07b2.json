{"ast":null,"code":"import \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport { VueEditor } from \"vue2-editor\";\nexport default {\n  props: {\n    userInfor: Object,\n    isLogged: Boolean,\n    isAdmin: Boolean\n  },\n  components: {\n    VueEditor: VueEditor\n  },\n  data: function data() {\n    return {\n      search: \"\",\n      itemsPerPage: 4,\n      items: [],\n      loading: false,\n      createForm: {\n        title: \"\",\n        avatar: \"\",\n        content: \"\"\n      },\n      createDialog: false\n    };\n  },\n  watch: {\n    search: function search(newValue) {\n      this.loadItems();\n    }\n  },\n  methods: {\n    loadItems: function loadItems() {\n      var _this = this;\n      this.loading = true;\n      setTimeout(function () {\n        _this.loading = false;\n        _this.$axios.get(\"/blogs?page=1&limit=\".concat(_this.itemsPerPage, \"&search=\").concat(_this.search)).then(function (res) {\n          _this.items = res.data.items || [];\n        })[\"catch\"](function (err) {\n          console.error(err);\n        });\n      }, 1000);\n    },\n    viewBlog: function viewBlog(id) {\n      this.$router.push({\n        name: \"blog-page\",\n        params: {\n          id: id\n        }\n      });\n    },\n    morePost: function morePost() {\n      this.itemsPerPage += 4;\n      this.loadItems();\n    },\n    createItem: function createItem() {\n      var _this2 = this;\n      this.$axios.post(\"/blogs\", {\n        title: this.createForm.title,\n        avatar: this.createForm.avatar,\n        content: this.createForm.content,\n        user_id: this.userInfor.id\n      }).then(function (res) {\n        _this2.createDialog = false;\n        _this2.createForm = {\n          title: \"\",\n          avatar: \"\",\n          content: \"\"\n        };\n        _this2.loadItems();\n      })[\"catch\"](function (err) {\n        console.error(err);\n      });\n    }\n  },\n  created: function created() {\n    this.loadItems();\n  }\n};","map":{"version":3,"names":["VueEditor","props","userInfor","Object","isLogged","Boolean","isAdmin","components","data","search","itemsPerPage","items","loading","createForm","title","avatar","content","createDialog","watch","newValue","loadItems","methods","_this","setTimeout","$axios","get","concat","then","res","err","console","error","viewBlog","id","$router","push","name","params","morePost","createItem","_this2","post","user_id","created"],"sources":["src/components/HomeBlogs.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <div\n      class=\"mt-6 mb-6 d-flex justify-space-between\"\n      style=\"font-size: 25px; margin-left: 125px\"\n    >\n      See our blog\n\n      <v-dialog v-model=\"createDialog\" width=\"1000\">\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn\n            dark\n            v-bind=\"attrs\"\n            v-on=\"on\"\n            small\n            color=\"#252525\"\n            style=\"right: 125px\"\n            v-if=\"isLogged && !isAdmin\"\n          >\n            <v-icon dark> mdi-plus </v-icon>\n            Create\n          </v-btn>\n        </template>\n        <v-card>\n          <v-card-title class=\"text-h5 grey lighten-2\">\n            Create Blog\n          </v-card-title>\n\n          <v-card-actions>\n            <v-row>\n              <v-col cols=\"12\">\n                <v-text-field\n                  v-model=\"createForm.title\"\n                  label=\"Title\"\n                ></v-text-field>\n              </v-col>\n\n              <v-col cols=\"12\">\n                <v-text-field\n                  v-model=\"createForm.avatar\"\n                  label=\"Avatar Link\"\n                ></v-text-field>\n              </v-col>\n\n              <v-col cols=\"12\">\n                <vue-editor v-model=\"createForm.content\"></vue-editor>\n              </v-col>\n            </v-row>\n          </v-card-actions>\n\n          <v-divider></v-divider>\n\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"#252525\" class=\"white--text\" @click=\"createItem\">\n              Create\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n\n    <v-text-field\n      v-model=\"search\"\n      label=\"Search\"\n      style=\"margin-left: 125px; margin-right: 125px; width: 200px\"\n      class=\"mb-6\"\n      append-icon=\"mdi-magnify\"\n    ></v-text-field>\n\n    <div style=\"margin-left: 125px; margin-right: 125px\" class=\"mb-6\">\n      <v-row>\n        <v-col cols=\"3\" class=\"post\" v-for=\"(item, i) in items\" :key=\"i\">\n          <div class=\"post-avatar\" @click=\"viewBlog(item.id)\">\n            <v-img\n              width=\"100%\"\n              height=\"200\"\n              class=\"rounded-lg\"\n              :src=\"item.avatar\"\n            ></v-img>\n          </div>\n          <div class=\"post-title\" @click=\"viewPost(item.id)\">\n            <strong>\n              {{ item.title }}\n            </strong>\n          </div>\n\n          <div>\n            <p style=\"opacity: 0.7; font-size: 12px\">{{ item.created_at }}</p>\n          </div>\n        </v-col>\n      </v-row>\n\n      <div class=\"more-post\">\n        <v-icon\n          dark\n          v-if=\"!loading\"\n          color=\"#252525\"\n          class=\"icon\"\n          @click=\"morePost\"\n        >\n          mdi-chevron-down</v-icon\n        >\n\n        <v-progress-circular\n          v-if=\"loading\"\n          indeterminate\n          color=\"primary\"\n        ></v-progress-circular>\n      </div>\n    </div>\n  </v-container>\n</template>\n\n<script>\nimport { VueEditor } from \"vue2-editor\";\nexport default {\n  props: {\n    userInfor: Object,\n    isLogged: Boolean,\n    isAdmin: Boolean,\n  },\n\n  components: {\n    VueEditor,\n  },\n\n  data() {\n    return {\n      search: \"\",\n      itemsPerPage: 4,\n      items: [],\n      loading: false,\n      createForm: {\n        title: \"\",\n        avatar: \"\",\n        content: \"\",\n      },\n\n      createDialog: false,\n    };\n  },\n\n  watch: {\n    search(newValue) {\n      this.loadItems();\n    },\n  },\n\n  methods: {\n    loadItems() {\n      this.loading = true;\n      setTimeout(() => {\n        this.loading = false;\n        this.$axios\n          .get(`/blogs?page=1&limit=${this.itemsPerPage}&search=${this.search}`)\n          .then((res) => {\n            this.items = res.data.items || [];\n          })\n          .catch((err) => {\n            console.error(err);\n          });\n      }, 1000);\n    },\n\n    viewBlog(id) {\n      this.$router.push({ name: \"blog-page\", params: { id: id } });\n    },\n\n    morePost() {\n      this.itemsPerPage += 4;\n      this.loadItems();\n    },\n\n    createItem() {\n      this.$axios\n        .post(`/blogs`, {\n          title: this.createForm.title,\n          avatar: this.createForm.avatar,\n          content: this.createForm.content,\n          user_id: this.userInfor.id,\n        })\n\n        .then((res) => {\n          this.createDialog = false;\n          this.createForm = {\n            title: \"\",\n            avatar: \"\",\n            content: \"\",\n          };\n\n          this.loadItems();\n        })\n\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n  },\n\n  created() {\n    this.loadItems();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.post {\n  .post-avatar,\n  .post-title {\n    cursor: pointer;\n    &:hover {\n      opacity: 0.5;\n    }\n  }\n}\n\n.more-post {\n  text-align: center;\n\n  .icon {\n    cursor: pointer;\n    &:hover {\n      opacity: 0.5;\n    }\n  }\n}\n</style>\n"],"mappings":";;;;;AAmHA,SAAAA,SAAA;AACA;EACAC,KAAA;IACAC,SAAA,EAAAC,MAAA;IACAC,QAAA,EAAAC,OAAA;IACAC,OAAA,EAAAD;EACA;EAEAE,UAAA;IACAP,SAAA,EAAAA;EACA;EAEAQ,IAAA,WAAAA,KAAA;IACA;MACAC,MAAA;MACAC,YAAA;MACAC,KAAA;MACAC,OAAA;MACAC,UAAA;QACAC,KAAA;QACAC,MAAA;QACAC,OAAA;MACA;MAEAC,YAAA;IACA;EACA;EAEAC,KAAA;IACAT,MAAA,WAAAA,OAAAU,QAAA;MACA,KAAAC,SAAA;IACA;EACA;EAEAC,OAAA;IACAD,SAAA,WAAAA,UAAA;MAAA,IAAAE,KAAA;MACA,KAAAV,OAAA;MACAW,UAAA;QACAD,KAAA,CAAAV,OAAA;QACAU,KAAA,CAAAE,MAAA,CACAC,GAAA,wBAAAC,MAAA,CAAAJ,KAAA,CAAAZ,YAAA,cAAAgB,MAAA,CAAAJ,KAAA,CAAAb,MAAA,GACAkB,IAAA,WAAAC,GAAA;UACAN,KAAA,CAAAX,KAAA,GAAAiB,GAAA,CAAApB,IAAA,CAAAG,KAAA;QACA,WACA,WAAAkB,GAAA;UACAC,OAAA,CAAAC,KAAA,CAAAF,GAAA;QACA;MACA;IACA;IAEAG,QAAA,WAAAA,SAAAC,EAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAAC,IAAA;QAAAC,MAAA;UAAAJ,EAAA,EAAAA;QAAA;MAAA;IACA;IAEAK,QAAA,WAAAA,SAAA;MACA,KAAA5B,YAAA;MACA,KAAAU,SAAA;IACA;IAEAmB,UAAA,WAAAA,WAAA;MAAA,IAAAC,MAAA;MACA,KAAAhB,MAAA,CACAiB,IAAA;QACA3B,KAAA,OAAAD,UAAA,CAAAC,KAAA;QACAC,MAAA,OAAAF,UAAA,CAAAE,MAAA;QACAC,OAAA,OAAAH,UAAA,CAAAG,OAAA;QACA0B,OAAA,OAAAxC,SAAA,CAAA+B;MACA,GAEAN,IAAA,WAAAC,GAAA;QACAY,MAAA,CAAAvB,YAAA;QACAuB,MAAA,CAAA3B,UAAA;UACAC,KAAA;UACAC,MAAA;UACAC,OAAA;QACA;QAEAwB,MAAA,CAAApB,SAAA;MACA,WAEA,WAAAS,GAAA;QACAC,OAAA,CAAAC,KAAA,CAAAF,GAAA;MACA;IACA;EACA;EAEAc,OAAA,WAAAA,QAAA;IACA,KAAAvB,SAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}