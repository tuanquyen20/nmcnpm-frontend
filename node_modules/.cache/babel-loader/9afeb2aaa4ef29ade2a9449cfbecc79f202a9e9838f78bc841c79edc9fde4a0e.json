{"ast":null,"code":"import \"core-js/modules/web.timers.js\";\nimport \"core-js/modules/es.array.concat.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nexport default {\n  props: {\n    userInfor: Object,\n    isLogged: Boolean,\n    isAdmin: Boolean\n  },\n  data: function data() {\n    return {\n      search: \"\",\n      itemsPerPage: 4,\n      items: [],\n      loading: false,\n      createForm: {\n        title: \"\",\n        avatar: \"\",\n        content: [],\n        contentInput: {\n          paragraph: \"\",\n          image: \"\"\n        }\n      },\n      createDialog: false\n    };\n  },\n  watch: {\n    search: function search(newValue) {\n      this.loadItems();\n    }\n  },\n  methods: {\n    loadItems: function loadItems() {\n      var _this = this;\n      this.loading = true;\n      setTimeout(function () {\n        _this.loading = false;\n        _this.$axios.get(\"/posts?page=1&limit=\".concat(_this.itemsPerPage, \"&search=\").concat(_this.search)).then(function (res) {\n          _this.items = res.data.items || [];\n        })[\"catch\"](function (err) {\n          console.error(err);\n        });\n      }, 1000);\n    },\n    viewPost: function viewPost(id) {\n      this.$router.push({\n        name: \"post-page\",\n        params: {\n          id: id\n        }\n      });\n    },\n    morePost: function morePost() {\n      this.itemsPerPage += 4;\n      this.loadItems();\n    },\n    addContentToEnd: function addContentToEnd(paragraph, image, formType) {\n      if (formType === \"create\") {\n        this.createForm.content.push({\n          paragraph: paragraph,\n          image: image\n        });\n        this.createForm.contentInput = {\n          paragraph: \"\",\n          image: \"\"\n        };\n      }\n    },\n    deleteContent: function deleteContent(item, formType) {\n      if (formType === \"create\") {\n        this.createForm.content = this.createForm.content.filter(function (e) {\n          return e != item;\n        });\n      }\n    },\n    createItem: function createItem() {\n      var _this2 = this;\n      this.$axios.post(\"/posts\", {\n        title: this.createForm.title,\n        avatar: this.createForm.avatar,\n        content: this.createForm.content,\n        user_id: this.userInfor.id\n      }).then(function (res) {\n        _this2.createDialog = false;\n        _this2.createForm = {\n          title: \"\",\n          avatar: \"\",\n          content: [],\n          contentInput: {\n            paragraph: \"\",\n            image: \"\"\n          }\n        };\n        _this2.loadItems();\n      })[\"catch\"](function (err) {\n        console.error(err);\n      });\n    }\n  },\n  created: function created() {\n    this.loadItems();\n  }\n};","map":{"version":3,"names":["props","userInfor","Object","isLogged","Boolean","isAdmin","data","search","itemsPerPage","items","loading","createForm","title","avatar","content","contentInput","paragraph","image","createDialog","watch","newValue","loadItems","methods","_this","setTimeout","$axios","get","concat","then","res","err","console","error","viewPost","id","$router","push","name","params","morePost","addContentToEnd","formType","deleteContent","item","filter","e","createItem","_this2","post","user_id","created"],"sources":["src/components/HomePosts.vue"],"sourcesContent":["<template>\n  <v-container fluid>\n    <div\n      class=\"mt-6 mb-6 d-flex justify-space-between\"\n      style=\"font-size: 25px; margin-left: 125px\"\n    >\n      See our post\n\n      <v-dialog v-model=\"createDialog\" width=\"1000\">\n        <template v-slot:activator=\"{ on, attrs }\">\n          <v-btn\n            dark\n            v-bind=\"attrs\"\n            v-on=\"on\"\n            small\n            color=\"#252525\"\n            style=\"right: 125px\"\n            v-if=\"isLogged && !isAdmin\"\n          >\n            <v-icon dark> mdi-plus </v-icon>\n            Create\n          </v-btn>\n        </template>\n        <v-card>\n          <v-card-title class=\"text-h5 grey lighten-2\">\n            Create Posts\n          </v-card-title>\n\n          <v-card-actions>\n            <v-row>\n              <v-col cols=\"12\">\n                <v-text-field\n                  v-model=\"createForm.title\"\n                  label=\"Title\"\n                ></v-text-field>\n              </v-col>\n\n              <v-col cols=\"12\">\n                <v-text-field\n                  v-model=\"createForm.avatar\"\n                  label=\"Avatar Link\"\n                ></v-text-field>\n              </v-col>\n\n              <v-col\n                cols=\"12\"\n                v-for=\"(item, index) in createForm.content\"\n                :key=\"index\"\n              >\n                <v-row>\n                  <v-col cols=\"8\">\n                    <v-textarea\n                      name=\"input-7-1\"\n                      label=\"Paragraph\"\n                      v-model=\"item.paragraph\"\n                      filled\n                    ></v-textarea>\n                  </v-col>\n\n                  <v-col cols=\"3\">\n                    <v-textarea\n                      name=\"input-7-1\"\n                      rows=\"2\"\n                      label=\"Image link\"\n                      v-model=\"item.image\"\n                      filled\n                    ></v-textarea>\n                  </v-col>\n\n                  <v-col cols=\"1\">\n                    <v-btn class=\"mx-2\" small fab dark color=\"red\">\n                      <v-icon dark @click=\"deleteContent(item, 'create')\">\n                        mdi-minus\n                      </v-icon>\n                    </v-btn>\n                  </v-col>\n                </v-row>\n              </v-col>\n\n              <v-col cols=\"12\">\n                <v-row>\n                  <v-col cols=\"8\">\n                    <v-textarea\n                      name=\"input-7-1\"\n                      label=\"Paragraph\"\n                      v-model=\"createForm.contentInput.paragraph\"\n                      filled\n                    ></v-textarea>\n                  </v-col>\n\n                  <v-col cols=\"3\">\n                    <v-textarea\n                      name=\"input-7-1\"\n                      rows=\"2\"\n                      label=\"Image link\"\n                      v-model=\"createForm.contentInput.image\"\n                      filled\n                    ></v-textarea>\n                  </v-col>\n\n                  <v-col cols=\"1\">\n                    <v-btn\n                      class=\"mx-2\"\n                      small\n                      fab\n                      dark\n                      color=\"indigo\"\n                      @click=\"\n                        addContentToEnd(\n                          createForm.contentInput.paragraph,\n                          createForm.contentInput.image,\n                          'create'\n                        )\n                      \"\n                    >\n                      <v-icon dark> mdi-plus </v-icon>\n                    </v-btn>\n                  </v-col>\n                </v-row>\n              </v-col>\n            </v-row>\n          </v-card-actions>\n\n          <v-divider></v-divider>\n\n          <v-card-actions>\n            <v-spacer></v-spacer>\n            <v-btn color=\"#252525\" class=\"white--text\" @click=\"createItem\">\n              Create\n            </v-btn>\n          </v-card-actions>\n        </v-card>\n      </v-dialog>\n    </div>\n\n    <v-text-field v-model=\"search\" label=\"Search\" style=\"margin-left: 125px; margin-right: 125px; width: 200px\" class=\"mb-6\" append-icon=\"mdi-magnify\"></v-text-field>\n\n    <div style=\"margin-left: 125px; margin-right: 125px;\" class=\"mb-6\">\n      <v-row>\n        <v-col cols=\"3\" class=\"post\" v-for=\"(item, i) in items\" :key=\"i\">\n          <div class=\"post-avatar\" @click=\"viewPost(item.id)\">\n            <v-img\n              width=\"100%\"\n              height=\"200\"\n              class=\"rounded-lg\"\n              :src=\"item.avatar\"\n            ></v-img>\n          </div>\n          <div class=\"post-title\" @click=\"viewPost(item.id)\">\n            <strong>\n              {{ item.title }}\n            </strong>\n          </div>\n\n          <div>\n            <p style=\"opacity: 0.7; font-size: 12px\">{{ item.created_at }}</p>\n          </div>\n        </v-col>\n      </v-row>\n\n      <div class=\"more-post\">\n        <v-icon\n          dark\n          v-if=\"!loading\"\n          color=\"#252525\"\n          class=\"icon\"\n          @click=\"morePost\"\n        >\n          mdi-chevron-down</v-icon\n        >\n\n        <v-progress-circular\n          v-if=\"loading\"\n          indeterminate\n          color=\"primary\"\n        ></v-progress-circular>\n      </div>\n    </div>\n  </v-container>\n</template>\n\n<script>\nexport default {\n  props: {\n    userInfor: Object,\n    isLogged: Boolean,\n    isAdmin: Boolean,\n  },\n\n  data() {\n    return {\n      search: \"\",\n      itemsPerPage: 4,\n      items: [],\n      loading: false,\n      createForm: {\n        title: \"\",\n        avatar: \"\",\n        content: [],\n\n        contentInput: {\n          paragraph: \"\",\n          image: \"\",\n        },\n      },\n\n      createDialog: false,\n    };\n  },\n\n  watch: {\n    search(newValue) {\n      this.loadItems();\n    },\n  },\n\n  methods: {\n    loadItems() {\n      this.loading = true;\n      setTimeout(() => {\n        this.loading = false;\n        this.$axios\n          .get(`/posts?page=1&limit=${this.itemsPerPage}&search=${this.search}`)\n          .then((res) => {\n            this.items = res.data.items || [];\n          })\n          .catch((err) => {\n            console.error(err);\n          });\n      }, 1000);\n    },\n\n    viewPost(id) {\n      this.$router.push({ name: \"post-page\", params: { id: id } });\n    },\n\n    morePost() {\n      this.itemsPerPage += 4;\n      this.loadItems();\n    },\n\n    addContentToEnd(paragraph, image, formType) {\n      if (formType === \"create\") {\n        this.createForm.content.push({\n          paragraph: paragraph,\n          image: image,\n        });\n\n        this.createForm.contentInput = {\n          paragraph: \"\",\n          image: \"\",\n        };\n      }\n    },\n\n    deleteContent(item, formType) {\n      if (formType === \"create\") {\n        this.createForm.content = this.createForm.content.filter(\n          (e) => e != item\n        );\n      }\n    },\n\n    createItem() {\n      this.$axios\n        .post(`/posts`, {\n          title: this.createForm.title,\n          avatar: this.createForm.avatar,\n          content: this.createForm.content,\n          user_id: this.userInfor.id,\n        })\n\n        .then((res) => {\n          this.createDialog = false;\n          this.createForm = {\n            title: \"\",\n            avatar: \"\",\n            content: [],\n\n            contentInput: {\n              paragraph: \"\",\n              image: \"\",\n            },\n          };\n\n          this.loadItems();\n        })\n\n        .catch((err) => {\n          console.error(err);\n        });\n    },\n  },\n\n  created() {\n    this.loadItems();\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.post {\n  .post-avatar,\n  .post-title {\n    cursor: pointer;\n    &:hover {\n      opacity: 0.5;\n    }\n  }\n}\n\n.more-post {\n  text-align: center;\n\n  .icon {\n    cursor: pointer;\n    &:hover {\n      opacity: 0.5;\n    }\n  }\n}\n</style>\n"],"mappings":";;;;;;;AAsLA;EACAA,KAAA;IACAC,SAAA,EAAAC,MAAA;IACAC,QAAA,EAAAC,OAAA;IACAC,OAAA,EAAAD;EACA;EAEAE,IAAA,WAAAA,KAAA;IACA;MACAC,MAAA;MACAC,YAAA;MACAC,KAAA;MACAC,OAAA;MACAC,UAAA;QACAC,KAAA;QACAC,MAAA;QACAC,OAAA;QAEAC,YAAA;UACAC,SAAA;UACAC,KAAA;QACA;MACA;MAEAC,YAAA;IACA;EACA;EAEAC,KAAA;IACAZ,MAAA,WAAAA,OAAAa,QAAA;MACA,KAAAC,SAAA;IACA;EACA;EAEAC,OAAA;IACAD,SAAA,WAAAA,UAAA;MAAA,IAAAE,KAAA;MACA,KAAAb,OAAA;MACAc,UAAA;QACAD,KAAA,CAAAb,OAAA;QACAa,KAAA,CAAAE,MAAA,CACAC,GAAA,wBAAAC,MAAA,CAAAJ,KAAA,CAAAf,YAAA,cAAAmB,MAAA,CAAAJ,KAAA,CAAAhB,MAAA,GACAqB,IAAA,WAAAC,GAAA;UACAN,KAAA,CAAAd,KAAA,GAAAoB,GAAA,CAAAvB,IAAA,CAAAG,KAAA;QACA,WACA,WAAAqB,GAAA;UACAC,OAAA,CAAAC,KAAA,CAAAF,GAAA;QACA;MACA;IACA;IAEAG,QAAA,WAAAA,SAAAC,EAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QAAAC,IAAA;QAAAC,MAAA;UAAAJ,EAAA,EAAAA;QAAA;MAAA;IACA;IAEAK,QAAA,WAAAA,SAAA;MACA,KAAA/B,YAAA;MACA,KAAAa,SAAA;IACA;IAEAmB,eAAA,WAAAA,gBAAAxB,SAAA,EAAAC,KAAA,EAAAwB,QAAA;MACA,IAAAA,QAAA;QACA,KAAA9B,UAAA,CAAAG,OAAA,CAAAsB,IAAA;UACApB,SAAA,EAAAA,SAAA;UACAC,KAAA,EAAAA;QACA;QAEA,KAAAN,UAAA,CAAAI,YAAA;UACAC,SAAA;UACAC,KAAA;QACA;MACA;IACA;IAEAyB,aAAA,WAAAA,cAAAC,IAAA,EAAAF,QAAA;MACA,IAAAA,QAAA;QACA,KAAA9B,UAAA,CAAAG,OAAA,QAAAH,UAAA,CAAAG,OAAA,CAAA8B,MAAA,CACA,UAAAC,CAAA;UAAA,OAAAA,CAAA,IAAAF,IAAA;QAAA,CACA;MACA;IACA;IAEAG,UAAA,WAAAA,WAAA;MAAA,IAAAC,MAAA;MACA,KAAAtB,MAAA,CACAuB,IAAA;QACApC,KAAA,OAAAD,UAAA,CAAAC,KAAA;QACAC,MAAA,OAAAF,UAAA,CAAAE,MAAA;QACAC,OAAA,OAAAH,UAAA,CAAAG,OAAA;QACAmC,OAAA,OAAAhD,SAAA,CAAAiC;MACA,GAEAN,IAAA,WAAAC,GAAA;QACAkB,MAAA,CAAA7B,YAAA;QACA6B,MAAA,CAAApC,UAAA;UACAC,KAAA;UACAC,MAAA;UACAC,OAAA;UAEAC,YAAA;YACAC,SAAA;YACAC,KAAA;UACA;QACA;QAEA8B,MAAA,CAAA1B,SAAA;MACA,WAEA,WAAAS,GAAA;QACAC,OAAA,CAAAC,KAAA,CAAAF,GAAA;MACA;IACA;EACA;EAEAoB,OAAA,WAAAA,QAAA;IACA,KAAA7B,SAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}